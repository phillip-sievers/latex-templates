
%% cd-fub-theme – Corporate‑Design theme for Freie Universität Berlin
%% -------------------------------------------------------------------
%%  Version: 2025‑06‑20
%%  Author:  <your name>
%%  License: LPPL 1.3c (LaTeX Project Public License) or later
%% -------------------------------------------------------------------
%%  This package applies the official FU Berlin corporate‑design look & feel
%%  (based on https://www.fu-berlin.de/sites/corporate-design/guidelines/index.html)
%%  to LaTeX documents – both Beamer presentations and classic essays/articles.
%%  Load it early via
%%      \usepackage[<options>]{cd-fub-theme}
%% 
%%  Options
%%  -------
%%    type=beamer   – presentation (auto‑detected if \@classname == beamer)
%%    type=essay    – article/report/book class (default)
%%    aspect=169|43 – slide aspect ratio (beamer only)
%%    language=ngerman|english – main language, defaults to english
%% -------------------------------------------------------------------
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{cd-fub-theme}[2025/06/20 FU‑Berlin Corporate‑Design theme]

\RequirePackage{kvoptions}
\SetupKeyvalOptions{family=fub, prefix=fub@}
\DeclareStringOption[type=]{type}[auto]
\DeclareStringOption[169]{aspect}
\DeclareStringOption[english]{language}
\ProcessKeyvalOptions*

\RequirePackage{iftex}
\ifPDFTeX
  \RequirePackage[T1]{fontenc}
  \RequirePackage[utf8]{inputenc}
  \RequirePackage{sourcesanspro}
  \renewcommand\familydefault{\sfdefault}
  \ifstrequal{\fub@language}{ngerman}{\RequirePackage[ngerman,english]{babel}}{\RequirePackage[english,ngerman]{babel}}
\else
  \RequirePackage{fontspec}
  \setsansfont{Source Sans Pro}
  \setmainfont{Source Sans Pro}
  \setmonofont{Source Code Pro}
  \RequirePackage{polyglossia}
  \setdefaultlanguage{\fub@language}
  \setotherlanguage{english}
  \setotherlanguage{ngerman}
\fi

\RequirePackage{xcolor}
\definecolor{fuBlack}{HTML}{000000}
\definecolor{fuBlack90}{HTML}{1A1A1A}
\definecolor{fuBlack80}{HTML}{333333}
\definecolor{fuBlack70}{HTML}{4D4D4D}
\definecolor{fuBlack60}{HTML}{666666}
\definecolor{fuBlack50}{HTML}{808080}
\definecolor{fuBlack40}{HTML}{999999}
\definecolor{fuBlack30}{HTML}{B3B3B3}
\definecolor{fuBlack20}{HTML}{CCCCCC}
\definecolor{fuBlack10}{HTML}{E6E6E6}
\definecolor{fuWhite}{HTML}{FFFFFF}

\definecolor{fuGreen}{HTML}{CCFF00}
\definecolor{fuBlue}{HTML}{004659}
\definecolor{fuBlue90}{HTML}{195869}
\definecolor{fuBlue80}{HTML}{336B7A}
\definecolor{fuBlue70}{HTML}{4C7D8A}
\definecolor{fuBlue60}{HTML}{66909B}
\definecolor{fuBlue50}{HTML}{7FA2AC}
\definecolor{fuBlue40}{HTML}{99B5BD}
\definecolor{fuBlue30}{HTML}{B2C7CD}
\definecolor{fuBlue20}{HTML}{CCDADE}
\definecolor{fuBlue10}{HTML}{E5ECEE}

\definecolor{fuSky}{HTML}{00A4D1}
\definecolor{fuOliveDark}{HTML}{58756A}
\definecolor{fuOliveLight}{HTML}{86B0A0}
\definecolor{fuOrange}{HTML}{E57050}
\definecolor{fuGrape}{HTML}{813353}

\def\fub@class{\@classname}
\ifcsname beamer@version\endcsname
  \def\fub@maybe{beamer}
\else
  \def\fub@maybe{essay}
\fi
\IfStrEq{\fub@type}{auto}{\edef\fub@type{\fub@maybe}}{}

\newcommand*{\fub@setup@essay}{%
  \RequirePackage{fancyhdr}
  \pagestyle{fancy}
  \fancyhf{}
  \fancyhead[L]{\small\sffamily \leftmark}
  \fancyhead[R]{\small\sffamily Freie Universität Berlin}
  \fancyfoot[C]{\thepage}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
  \RequirePackage[colorlinks=true,urlcolor=fuBlue,linkcolor=fuBlue]{hyperref}
}

\newcommand*{\fub@setup@beamer}{%
  \PassOptionsToClass{aspectratio=\fub@aspect}{beamer}%
  \setbeamercolor{title}{fg=fuBlue}
  \setbeamercolor{subtitle}{fg=fuBlack}
  \setbeamercolor{frametitle}{fg=fuBlue,bg=fuWhite}
  \setbeamercolor{normal text}{fg=fuBlack,bg=fuWhite}
  \setbeamercolor{alerted text}{fg=fuGreen}
  \setbeamercolor{example text}{fg=fuBlue}
  \setbeamercolor{structure}{fg=fuBlue}
  \setbeamercolor{block title}{fg=fuWhite,bg=fuBlue}
  \setbeamercolor{block body}{fg=fuBlack,bg=fuBlue10}
  \setbeamerfont{frametitle}{series=\bfseries}
  \setbeamertemplate{footline}{%
    \leavevmode%
    \hbox{%
      \begin{beamercolorbox}[wd=.72\paperwidth,ht=2.5ex,dp=1ex,leftskip=1em]{author in head/foot}%
        {\tiny\insertshortauthor} \hspace{1em}{\scriptsize\insertshorttitle}
      \end{beamercolorbox}%
      \begin{beamercolorbox}[wd=.23\paperwidth,ht=2.5ex,dp=1ex,center]{author in head/foot}%
        \inserttitlegraphic
      \end{beamercolorbox}%
      \begin{beamercolorbox}[wd=.05\paperwidth,ht=2.5ex,dp=1ex,right]{author in head/foot}%
        \insertframenumber{} / \inserttotalframenumber
      \end{beamercolorbox}%
    }%
    \vskip0pt%
  }%
  \setbeamertemplate{navigation symbols}{}%
  \hypersetup{colorlinks=true,urlcolor=fuBlue,linkcolor=fuBlue}%
}

\AtBeginDocument{%
  \ifstrequal{\fub@type}{beamer}{\fub@setup@beamer}{\fub@setup@essay}%
}

\newcommand{\FUlogo}[2][1cm]{%
  \includegraphics[height=#1]{#2}%
}
\newcommand{\FUnote}[1]{%
  {\leavevmode\color{fuGreen}\rule{2pt}{#1}\hspace{0.5em}}%
}

\endinput
